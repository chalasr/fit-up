{% extends 'SonataAdminBundle:CRUD:base_edit.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function() {
            var action = "{{ admin.id(object) }}" ? 'edit' : 'create';
            var token = "{{ admin.uniqId }}";
            var isCyclic = $('#' + token + '_cyclic');
            var cyclicCollection = $('div[id$="' + token + '_cyclicEvent"]');

            if (action == 'create') {
                return;
            }

            if (!isCyclic.is(':checked')) {
                cyclicCollection.hide();
            }

            isCyclic.on('ifChecked ifUnchecked', function(e, aux){
              cyclicCollection.slideToggle();
            });

            console.log(isCyclic);
            isCyclic.change(function() {
                console.log('change');
            });
        });
    </script>
{% endblock %}
